function randomMoment(e){var t,a,o;t=e.count;var n=Math.floor(Math.random()*t);a=e.results.happyMoments[n].date.text,o=e.results.happyMoments[n].moment,document.querySelector(".moment--text").innerHTML=o,document.querySelector(".moment--date").innerHTML=formatDate(a),document.querySelector(".date--rand").addEventListener("click",function(e){randomMoment(data)})}function formatDate(e){var t={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"June","07":"July","08":"Aug","09":"Sept",10:"Oct",11:"Nov",12:"Dec"},a=e.slice(0,2),o=e.slice(3,5);return t[a]+" "+o}function buildGrad(){grd=context.createLinearGradient(canvas.width,0,canvas.width,canvas.height),grd.addColorStop(0,bgc1),grd.addColorStop(1,bgc2),context.fillStyle=grd,context.fill()}function getCanvasSize(){return{specifiedWidth:canvas.width,specifiedHeight:canvas.height,realWidth:canvas.offsetWidth,realHeight:canvas.offsetHeight,heightScale:canvas.height/canvas.offsetHeight,widthScale:canvas.width/canvas.offsetWidth}}var request=new XMLHttpRequest;request.open("GET","/json-list",!0);var data;request.onload=function(){request.status>=200&&request.status<400?(data=JSON.parse(request.responseText),randomMoment(data),console.log("reload")):console.log("we can't find the happy moments :(")},request.onerror=function(){console.log("connection error")},request.send(),WebFontConfig={google:{families:["Roboto:100,300italic:latin"]}},function(){var e=document.createElement("script");e.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",e.type="text/javascript",e.async="true";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var canvas=document.getElementById("gradient"),context=canvas.getContext("2d");context.rect(0,0,canvas.width,canvas.height);var bgc1="rgb(142,214,255)",bgc2="rgb(244,214,255)",grd=context.createLinearGradient(canvas.width,0,canvas.width,canvas.height);buildGrad();var mouseX=0,mouseY=0;window.addEventListener("mousemove",function(e){var t=getCanvasSize(),a=e.pageX-canvas.offsetLeft,o=e.pageY-canvas.offsetTop;mouseX=a*t.widthScale,mouseY=o*t.heightScale,bgc1="rgb("+Math.floor(2*mouseY+60)+","+Math.floor(mouseX/2+40)+","+Math.floor(5*mouseY+160)+")",bgc2="rgb("+Math.floor(mouseX)+",214,255)",buildGrad()});