function getHashNum(e){return e.split("#")[1]}function momentsFunction(e){function t(){d=Math.floor(Math.random()*i),a(d)}function n(){d++,a(d)}function o(){d--,a(d)}function a(e){r=c.results.happyMoments[e].date.text,s=c.results.happyMoments[e].moment,document.querySelector(".moment--text").innerHTML=s,document.querySelector(".moment--date").innerHTML=formatDate(r),history.pushState(null,null,"#"+e)}var c,i,r,s,d;c=e,i=c.count,window.location.href.includes("#")?(console.log(getHashNum(window.location.href)),d=getHashNum(window.location.href),a(d)):t(),document.querySelector(".date--rand").addEventListener("click",function(e){t()}),document.querySelector(".date--next").addEventListener("click",function(e){n()}),document.querySelector(".date--prev").addEventListener("click",function(e){o()})}function formatDate(e){var t={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"June","07":"July","08":"Aug","09":"Sept",10:"Oct",11:"Nov",12:"Dec"},n=e.slice(0,2),o=e.slice(3,5);return t[n]+" "+o}function buildGrad(){grd=context.createLinearGradient(canvas.width,0,canvas.width,canvas.height),grd.addColorStop(0,bgc1),grd.addColorStop(1,bgc2),context.fillStyle=grd,context.fill()}function getCanvasSize(){return{specifiedWidth:canvas.width,specifiedHeight:canvas.height,realWidth:canvas.offsetWidth,realHeight:canvas.offsetHeight,heightScale:canvas.height/canvas.offsetHeight,widthScale:canvas.width/canvas.offsetWidth}}var request=new XMLHttpRequest;request.open("GET","/json-list",!0),window.onload=function(){return console.log(window.location.href),window.location.href.includes("#")?(console.log(getHashNum(window.location.href)),void updateMoments(getHashNum(window.location.href))):void 0},request.onload=function(){if(request.status>=200&&request.status<400){var e=JSON.parse(request.responseText);momentsFunction(e)}else console.log("we can't find the happy moments :(")},request.onerror=function(){console.log("connection error")},request.send(),WebFontConfig={google:{families:["Roboto:100,300italic:latin"]}},function(){var e=document.createElement("script");e.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",e.type="text/javascript",e.async="true";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var canvas=document.getElementById("gradient"),context=canvas.getContext("2d");context.rect(0,0,canvas.width,canvas.height);var bgc1="rgb(142,214,255)",bgc2="rgb(244,214,255)",grd=context.createLinearGradient(canvas.width,0,canvas.width,canvas.height);buildGrad();var mouseX=0,mouseY=0;window.addEventListener("mousemove",function(e){var t=getCanvasSize(),n=e.pageX-canvas.offsetLeft,o=e.pageY-canvas.offsetTop;mouseX=n*t.widthScale,mouseY=o*t.heightScale,bgc1="rgb("+Math.floor(2*mouseY+60)+","+Math.floor(mouseX/2+40)+","+Math.floor(5*mouseY+160)+")",bgc2="rgb("+Math.floor(mouseX)+",214,255)",buildGrad()});