var request=new XMLHttpRequest;request.open("GET","/json-list",!0),request.onload=function(){if(request.status>=200&&request.status<400){var e=JSON.parse(request.responseText);momentsFunction(e),window.onload=function(){return console.log(window.location.href),String.prototype.includes=function(){"use strict";return console.log("ran includes script"),-1!==String.prototype.indexOf.apply(this,arguments)},window.location.href.includes("#")?(console.log(getHashNum(window.location.href)),void updateMoments(getHashNum(window.location.href))):void 0}}else console.log("we can't find the happy moments :(")},request.onerror=function(){document.querySelector(".moment--text").innerHTML="connection error"},request.send();
function formatDate(t){var e={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sept",10:"Oct",11:"Nov",12:"Dec"},n=t.slice(0,2),r=t.slice(3,5);return e[n]+" "+r}function getHashNum(t){return t.split("#")[1]}String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)});
WebFontConfig={google:{families:["Roboto:100,300italic:latin"]}},function(){var t=document.createElement("script");t.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",t.type="text/javascript",t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}();
function buildGrad(){grd=context.createLinearGradient(canvas.width,0,canvas.width,canvas.height),grd.addColorStop(0,bgc1),grd.addColorStop(1,bgc2),context.fillStyle=grd,context.fill()}function getCanvasSize(){return{specifiedWidth:canvas.width,specifiedHeight:canvas.height,realWidth:canvas.offsetWidth,realHeight:canvas.offsetHeight,heightScale:canvas.height/canvas.offsetHeight,widthScale:canvas.width/canvas.offsetWidth}}var canvas=document.getElementById("gradient"),context=canvas.getContext("2d");context.rect(0,0,canvas.width,canvas.height);var bgc1="rgb(142,214,255)",bgc2="rgb(244,214,255)",grd=context.createLinearGradient(canvas.width,0,canvas.width,canvas.height);buildGrad();var mouseX=0,mouseY=0;window.addEventListener("mousemove",function(e){var t=getCanvasSize(),a=e.pageX-canvas.offsetLeft,i=e.pageY-canvas.offsetTop;mouseX=a*t.widthScale,mouseY=i*t.heightScale,bgc1="rgb("+Math.floor(2*mouseY+60)+","+Math.floor(mouseX/2+40)+","+Math.floor(5*mouseY+160)+")",bgc2="rgb("+Math.floor(mouseX)+",214,255)",buildGrad()});var sidebar=document.querySelector(".sidebar");sidebar.addEventListener("click",function(){sidebar.hasAttribute("data-state")?sidebar.removeAttribute("data-state"):sidebar.setAttribute("data-state","open")});
function momentsFunction(e){function t(){d=Math.floor(Math.random()*r),c(d)}function n(){d++,c(d)}function o(){d--,c(d)}function c(e){i=u.results.happyMoments[e].date.text,a=u.results.happyMoments[e].moment,document.querySelector(".moment--text").innerHTML=a,document.querySelector(".moment--date").innerHTML=formatDate(i),history.pushState(null,null,"#"+e)}var u,r,i,a,d;u=e,r=u.count,window.location.href.includes("#")?(console.log(getHashNum(window.location.href)),d=getHashNum(window.location.href),c(d)):t(),document.querySelector(".date--rand").addEventListener("click",function(e){t()}),document.querySelector(".date--next").addEventListener("click",function(e){n()}),document.querySelector(".date--prev").addEventListener("click",function(e){o()})}